<!-- spa_base.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body data-theme="{% if settings.is_white_theme %}light{% else %}dark{% endif %}">
    <div class="container">
        <div class="sidebar" id="sidebar">
            <button class="nav-btn" id="home-btn">
                <img class="nav-icon" data-light="{% static 'images/nav/nav_home_light.png' %}" 
                     data-dark="{% static 'images/nav/nav_home_dark.png' %}" 
                     src="{% static 'images/nav/nav_home_light.png' %}" 
                     style="width: 30px; height: 30px;">
                <span id="label_home"><br>{% if settings.country_id == "US" %}Home{% elif settings.country_id == "KR" %}í™ˆ{% elif settings.country_id == "JP" %}ã†ã¡{% elif settings.country_id == "CN" %}æˆ¿å­{% endif %}</span>
            </button>
            <button class="nav-btn" data-url="/app/planner/">
                <img class="nav-icon" data-light="{% static 'images/nav/nav_planner_light.png' %}" 
                     data-dark="{% static 'images/nav/nav_planner_dark.png' %}" 
                     src="{% static 'images/nav/nav_planner_light.png' %}" 
                     style="width: 30px; height: 30px;">
                <span id="label_planner"><br>{% if settings.country_id == "US" %}Planner{% elif settings.country_id == "KR" %}í”Œë˜ë„ˆ{% elif settings.country_id == "JP" %}ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼{% elif settings.country_id == "CN" %}è§„åˆ’å¸ˆ{% endif %}</span>
            </button>
            <button class="nav-btn" data-url="/app/chatting/">
                <img class="nav-icon" data-light="{% static 'images/nav/nav_chattings_light.png' %}" 
                     data-dark="{% static 'images/nav/nav_chattings_dark.png' %}" 
                     src="{% static 'images/nav/nav_chattings_light.png' %}" 
                     style="width: 30px; height: 30px;">
                <span id="label_chatting"><br>{% if settings.country_id == "US" %}Chatting{% elif settings.country_id == "KR" %}ì±„íŒ…{% elif settings.country_id == "JP" %}ãŠã—ã‚ƒã¹ã‚Š{% elif settings.country_id == "CN" %}èŠå¤©{% endif %}</span>
            </button>
            <button class="nav-btn" data-url="/app/favorites/">
                <img class="nav-icon" data-light="{% static 'images/nav/nav_favorites_light.png' %}" 
                     data-dark="{% static 'images/nav/nav_favorites_dark.png' %}" 
                     src="{% static 'images/nav/nav_favorites_light.png' %}" 
                     style="width: 30px; height: 30px;">
                <span id="label_bookmarks"><br>{% if settings.country_id == "US" %}Bookmarks{% elif settings.country_id == "KR" %}ì¦ê²¨ì°¾ê¸°{% elif settings.country_id == "JP" %}ãŠæ°—ã«å…¥ã‚Š{% elif settings.country_id == "CN" %}æ”¶è—å¤¹{% endif %}</span>
            </button>
            <button class="nav-btn" data-url="/app/settings/">
                <img class="nav-icon" data-light="{% static 'images/nav/nav_settings_light.png' %}" 
                     data-dark="{% static 'images/nav/nav_settings_dark.png' %}" 
                     src="{% static 'images/nav/nav_settings_light.png' %}" 
                     style="width: 30px; height: 30px;">
                <span id="label_settings"><br>{% if settings.country_id == "US" %}Settings{% elif settings.country_id == "KR" %}ì„¤ì •{% elif settings.country_id == "JP" %}è¨­å®š{% elif settings.country_id == "CN" %}è®¾ç½®{% endif %}</span>
            </button>
            <button class="nav-btn" data-url="/app/profile/">
                <img class="nav-icon" data-light="{% static 'images/nav/nav_profile_light.png' %}" 
                     data-dark="{% static 'images/nav/nav_profile_dark.png' %}" 
                     src="{% static 'images/nav/nav_profile_light.png' %}" 
                     style="width: 30px; height: 30px;">
                <span id="label_profile"><br>{% if settings.country_id == "US" %}Profile{% elif settings.country_id == "KR" %}ë‚´ í”„ë¡œí•„{% elif settings.country_id == "JP" %}ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«{% elif settings.country_id == "CN" %}è½®å»“{% endif %}</span>
            </button>
        </div>

        <!-- ë™ì  ì½˜í…ì¸  ì˜ì—­ -->
        <div id="content1">            
            <!-- AJAXë¡œ ë¶ˆëŸ¬ì˜¨ partial HTMLì´ ì—¬ê¸° ë“¤ì–´ê° -->
        </div>
        <!-- ì§€ë„ ì˜ì—­ -->
        <div id="map-container">
            <div id="map"></div>
            <div id="map-panel">
                <div id="drag-handle"></div> <!-- ë“œë˜ê·¸ í•¸ë“¤ ì¶”ê°€ -->
                <div id="button-panel">
                    <div class="title-group">
                        <strong id="panel-title"></strong>
                        <input id="edit-title" type="text" style="display: none;" maxlength="20">
                        <button id="editPanelTitleBtn" onclick="editPanelTitle()">âœï¸</button>
                        <button id="editPanelTitleOKBtn" onclick="editPanelTitleOK()">âœ…</button>
                        <button id="editPanelTitleNOBtn" onclick="editPanelTitleNO()">âŒ</button>
                    </div>
                    <div class="button-group">
                        <button id="removeContentBtn" onclick="removeContent()">ğŸ—‘ï¸</button>
                        <button id="getBookmarkListBtn" onclick="getBookmarkList()">â˜†</button>
                        <button id="toggleUIBtn" onclick="toggleMapPanel()">â®Ÿ</button>
                    </div>
                </div> 
                <div class="map-panel-content">
                </div>
            </div>
        </div>
    </div>

    <!-- ìƒˆë¡œìš´ ì• ë‹ˆë©”ì´ì…˜ìš© DIV -->
    <div id="bookmarklist-div">
        <div style="display: flex; justify-content: flex-end; align-items: flex-end;">
            <button id="closeBookmarkListBtn" onclick="document.querySelector('#bookmarklist-div').classList.remove('active');">âˆ¨</button>
        </div>
        <div class="bookmarklist-panel">
            <div style="text-align: center; margin-bottom: 40px;">
                <h2 style="text-align: center; margin: 0; margin-bottom: 10px;">Edit this title</h2>
                <h3 style="display: none;"></h3>
                <input id="change-bookmarktitle" type="text" 
                    style="display: none; margin: 0 auto 10px; margin-bottom: 10px; background: transparent; 
                            color: white; outline: none; border: 1px solid; font-size: 20px;
                            max-width: 330px; min-width: 200px;"
                    maxlength="50">
                <h6 style="text-align: center; margin: 0;">
                    {% if settings.country_id == "KR" %}(ë‘ ë²ˆ í´ë¦­í•˜ì—¬ ì œëª© í¸ì§‘)
                    {% elif settings.country_id == "JP" %}(ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚¿ã‚¤ãƒˆãƒ«ã‚’ç·¨é›†ã—ã¾ã™)
                    {% elif settings.country_id == "CN" %}(åŒå‡»ç¼–è¾‘æ ‡é¢˜)
                    {% elif settings.country_id == "US" %}(Double click the title to edit)
                    {% endif %}
                </h6>
            </div>
            <ul>

            </ul>
        </div>
    </div>

    <!-- íŒì—… ì°½ -->
    <div id="popup" class="popup hidden">
        <div class="popup-content">
            <h3>Are you sure you want to delete your account?</h3>
            <div class="popup-buttons">
                <button id="confirm-delete" class="popup-button">Yes, Delete</button>
                <button id="cancel-delete" class="popup-button">Cancel</button>
            </div>
        </div>
    </div>
    <script>
        const isLoggedIn = {{ user.is_authenticated|yesno:"true,false" }};
        const ncpClientId = "{{ ncp_client_id|default:'' }}";
        const ncpClientSecret = "{{ ncp_client_secret|default:'' }}";
        let countryId = "{{ settings.country_id|default:'US' }}";
    </script>
    <script src="{% static 'js/spa_base.js' %}" defer></script>
</body>
</html>
